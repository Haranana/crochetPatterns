<!DOCTYPE html>
<html lang="pl-PL" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="#{showPost.name}"></title>
  <link href="../static/css/style.css" th:href="@{/css/style.css}" rel="stylesheet" />
    <button type="button" th:text="#{mainPageReturnLink}" onclick="window.location.href='http://localhost:8080/main'"></button> <hr>
</head>
<body>

<div th:if="${isViewedByAuthor}">
    <a th:href="@{/editPost(postId=${post.id})}">Edytuj Post</a>
    <a th:href="@{/deletePost(postId=${post.id})}">Usun Post</a>
</div>


<strong th:text="${post.title}"></strong> <br>
<a th:href="@{/userProfile(userId=${postAuthor.id})}" th:text="${postAuthor.username}"></a> <br>
<span th:text="${post.description}"></span> <br>
<a th:if="${post.pdfFilePath != null}"
   th:href="@{/posts/{id}/pdf(id=${post.id})}"
   target="_blank">
    Pobierz PDF
</a><br>
<span th:text="${post.showableDate}"></span> <br> <br>

<div th:if="${isLogged}">
    <a th:href="@{/writeComment(postId=${post.id})}">Dodaj komentarz</a>
</div>

<div th:unless="${isLogged}">
    <a th:href="@{/login}">Zaloguj siÄ™ aby dodac komentarz</a>
</div>

<span th:each="comment , iterStat : ${postComments}">
    <!---
    <a th:href="@{/userProfile(userId=${commentsAuthors[iterStat.index].id})}" th:text="${commentsAuthors[iterStat.index].username}"></a> <br>
    <a th:href="@{/userProfile/{userId}(userId=${postAuthor.id})}" th:text="${postAuthor.username}"></a>
    --->
    <a th:href="@{/userProfile(userId=${commentsAuthors[iterStat.index].id})}" th:text="${commentsAuthors[iterStat.index].username}"></a> <br>
    <span th:text="${comment.text}"></span> <br>
    <span th:text="${comment.showableDate}"></span> <br>
    <span th:text="${comment.creationTimeValue}"></span>
    <span th:switch="${comment.creationTimeValueType}">
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).YEAR}" th:text="#{showAllPosts.year}"></span>
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).MONTH}" th:text="#{showAllPosts.month}"></span>
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).WEEK}" th:text="#{showAllPosts.week}"></span>
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).DAY}" th:text="#{showAllPosts.day}"></span>
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).HOUR}" th:text="#{showAllPosts.hour}"></span>
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).MINUTE}" th:text="#{showAllPosts.minute}"></span>
            <span th:case="${T(com.example.crochetPatterns.dtos.CommentDTO.CreationTimeValueType).SECOND}" th:text="#{showAllPosts.second}"></span>
            <span th:case="*"></span>
        </span>
    <br> <br>
</span>

<a th:href="@{/allPosts}" th:text="#{showPost.allPostsReturn}"></a>
</body>
</html>